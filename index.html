<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üë∂ Baby Care Simulator üë∂</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* --- Reset & Base --- */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Open Sans', sans-serif;
            background: linear-gradient(to bottom right, #fce4ec, #e0f2f7); /* Tons pastel */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            color: #333;
            -webkit-user-select: none; /* Desabilita sele√ß√£o de texto no iOS */
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            touch-action: manipulation; /* Melhor resposta ao toque */
        }

        /* --- Game Container (Simula tela de celular) --- */
        .game-container {
            width: 100%;
            max-width: 400px; /* Largura de celular */
            height: 100vh;
            max-height: 800px; /* Altura de celular */
            background-color: #fff;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2), 0 0 0 8px rgba(255,255,255,0.8) inset;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        /* --- Header / Infos do Jogo --- */
        .game-header {
            background-color: #ffcdd2; /* Rosa claro */
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: 'Fredoka One', cursive;
            color: #d81b60; /* Rosa escuro */
            border-bottom: 2px solid #f48fb1;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 10;
        }
        .game-header div { font-size: 1.1em; }

        /* --- Beb√™ e Status --- */
        .baby-area {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            align-items: center;
            padding: 20px;
            background: #ffebee; /* Fundo mais claro */
            position: relative;
        }
        .baby-image {
            width: 180px;
            height: 180px;
            background: url('https://i.imgur.com/B9B2Qp7.png') no-repeat center center / contain; /* Imagem de beb√™ gen√©rica */
            transition: transform 0.2s ease-out;
        }
        .baby-image.sleep { transform: rotate(5deg); }
        .baby-image.happy { transform: scale(1.05); }
        .baby-image.sad { transform: translateY(5px); filter: grayscale(30%); }
        .baby-image.cry { animation: shake 0.5s infinite; filter: grayscale(50%); }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
        }

        .status-bars {
            width: 90%;
            max-width: 250px;
            margin-top: 20px;
        }
        .status-bar {
            background-color: #e0e0e0;
            border-radius: 10px;
            height: 15px;
            margin-bottom: 10px;
            overflow: hidden;
            position: relative;
        }
        .status-fill {
            height: 100%;
            width: 100%; /* Largura inicial, ajustada via JS */
            border-radius: 10px;
            background-color: #81c784; /* Verde */
            transition: width 0.5s ease-out, background-color 0.5s ease-out;
        }
        .status-bar.hunger .status-fill { background-color: #ffd54f; } /* Amarelo */
        .status-bar.diaper .status-fill { background-color: #90caf9; } /* Azul */
        .status-bar.sleep .status-fill { background-color: #ce93d8; } /* Roxo */
        
        /* Cores de alerta */
        .status-fill.warning { background-color: #ffb74d !important; } /* Laranja */
        .status-fill.danger { background-color: #ef5350 !important; } /* Vermelho */


        /* --- Bot√µes de A√ß√£o --- */
        .actions-area {
            background-color: #f8bbd0; /* Rosa mais escuro */
            padding: 20px 10px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            border-top: 2px solid #f48fb1;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
        }
        .action-button {
            background-color: #ef9a9a; /* Rosa salm√£o */
            color: #fff;
            padding: 15px 10px;
            border: none;
            border-radius: 15px;
            font-family: 'Fredoka One', cursive;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 5px;
            min-height: 80px;
        }
        .action-button:hover { background-color: #e57373; }
        .action-button:active { transform: translateY(2px); box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .action-button.disabled { opacity: 0.6; cursor: not-allowed; }
        .action-button .icon { font-size: 1.8em; line-height: 1; } /* √çcones de emoji */

        /* --- Popups (Game Over / Vit√≥ria) --- */
        .popup-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 20;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease-out;
        }
        .popup-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }
        .popup-content {
            background: #fff;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            max-width: 80%;
            transform: scale(0.8);
            transition: transform 0.3s ease-out;
        }
        .popup-overlay.active .popup-content {
            transform: scale(1);
        }
        .popup-content h2 {
            font-family: 'Fredoka One', cursive;
            font-size: 2em;
            margin-bottom: 15px;
            color: #d81b60;
        }
        .popup-content p {
            font-size: 1.1em;
            margin-bottom: 25px;
            color: #555;
        }
        .popup-content button {
            background-color: #d81b60;
            color: #fff;
            padding: 10px 25px;
            border: none;
            border-radius: 50px;
            font-family: 'Fredoka One', cursive;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .popup-content button:hover { background-color: #c2185b; }

        .popup-content.game-over h2 { color: #ef5350; }
        .popup-content.game-over button { background-color: #ef5350; }
        .popup-content.game-over button:hover { background-color: #d32f2f; }
    </style>
</head>
<body>

    <div class="game-container">
        <div class="game-header">
            <div>Score: <span id="score">0</span></div>
            <div>Tempo: <span id="timer">00:00</span></div>
        </div>

        <div class="baby-area">
            <div id="babyImage" class="baby-image"></div>
            <div class="status-bars">
                <div class="status-bar hunger">
                    <div id="hungerFill" class="status-fill" style="width: 100%;"></div>
                </div>
                <div class="status-bar diaper">
                    <div id="diaperFill" class="status-fill" style="width: 100%;"></div>
                </div>
                <div class="status-bar sleep">
                    <div id="sleepFill" class="status-fill" style="width: 100%;"></div>
                </div>
            </div>
        </div>

        <div class="actions-area">
            <button class="action-button" onclick="feedBaby()">
                <span class="icon">üçº</span> Alimentar
            </button>
            <button class="action-button" onclick="changeDiaper()">
                <span class="icon">üí©</span> Trocar Fralda
            </button>
            <button class="action-button" onclick="putToSleep()">
                <span class="icon">üò¥</span> Nanar
            </button>
            <button class="action-button" onclick="takeForWalk()">
                <span class="icon">üö∂‚Äç‚ôÄÔ∏è</span> Passear
            </button>
        </div>

        <div id="gameOverPopup" class="popup-overlay">
            <div class="popup-content game-over">
                <h2>Game Over! üò≠</h2>
                <p>O beb√™ ficou muito triste e n√£o resistiu aos seus descuidos.</p>
                <p>Seu Score Final: <span id="finalScoreGameOver">0</span></p>
                <button onclick="restartGame()">Jogar Novamente</button>
            </div>
        </div>

        <div id="gameWinPopup" class="popup-overlay">
            <div class="popup-content">
                <h2>Parab√©ns! üéâ</h2>
                <p>Voc√™ √© o(a) melhor cuidador(a) de beb√™s!</p>
                <p>Voc√™ cuidou do beb√™ por <span id="finalTimeWin">00:00</span> e atingiu um Score de <span id="finalScoreWin">0</span>.</p>
                <button onclick="restartGame()">Jogar Novamente</button>
            </div>
        </div>
    </div>

    <script>
        const babyImage = document.getElementById('babyImage');
        const hungerFill = document.getElementById('hungerFill');
        const diaperFill = document.getElementById('diaperFill');
        const sleepFill = document.getElementById('sleepFill');
        const scoreDisplay = document.getElementById('score');
        const timerDisplay = document.getElementById('timer');
        const gameOverPopup = document.getElementById('gameOverPopup');
        const gameWinPopup = document.getElementById('gameWinPopup');
        const finalScoreGameOver = document.getElementById('finalScoreGameOver');
        const finalTimeWin = document.getElementById('finalTimeWin');
        const finalScoreWin = document.getElementById('finalScoreWin');

        let hunger = 100;
        let diaper = 100;
        let sleep = 100;
        let score = 0;
        let gameTime = 0; // Tempo em segundos
        let gameInterval;
        let needsInterval;
        let isGameOver = false;
        const GAME_DURATION = 180; // Dura√ß√£o do jogo em segundos (3 minutos)

        const NEEDS_DECREASE_RATE = {
            hunger: 2, // Diminui 2 a cada segundo
            diaper: 1.5,
            sleep: 1
        };
        const ACTION_EFFECT = {
            feed: 40,
            diaper: 50,
            sleep: 60,
            walk: 20
        };
        const ACTION_COOLDOWN = 3000; // 3 segundos de cooldown

        const actionButtons = document.querySelectorAll('.action-button');

        function updateUI() {
            hungerFill.style.width = hunger + '%';
            diaperFill.style.width = diaper + '%';
            sleepFill.style.width = sleep + '%';
            scoreDisplay.innerText = score;

            // Cores das barras de status
            [
                { fill: hungerFill, value: hunger },
                { fill: diaperFill, value: diaper },
                { fill: sleepFill, value: sleep }
            ].forEach(item => {
                item.fill.classList.remove('warning', 'danger');
                if (item.value <= 30) {
                    item.fill.classList.add('warning');
                }
                if (item.value <= 10) {
                    item.fill.classList.add('danger');
                }
            });

            // Estado do beb√™ (imagem)
            babyImage.className = 'baby-image'; // Reseta classes
            if (hunger <= 10 || diaper <= 10 || sleep <= 10) {
                babyImage.classList.add('cry');
            } else if (hunger <= 30 || diaper <= 30 || sleep <= 30) {
                babyImage.classList.add('sad');
            } else if (sleep < 50) { // Se estiver com sono, mas n√£o cr√≠tico
                 babyImage.classList.add('sleep');
            } else {
                babyImage.classList.add('happy');
            }
        }

        function decreaseNeeds() {
            if (isGameOver) return;

            hunger = Math.max(0, hunger - NEEDS_DECREASE_RATE.hunger);
            diaper = Math.max(0, diaper - NEEDS_DECREASE_RATE.diaper);
            sleep = Math.max(0, sleep - NEEDS_DECREASE_RATE.sleep);

            checkGameOver();
            updateUI();
        }

        function checkGameOver() {
            if (hunger === 0 || diaper === 0 || sleep === 0) {
                endGame(false); // Game Over
            }
        }

        function updateTimer() {
            if (isGameOver) return;

            gameTime++;
            const minutes = Math.floor(gameTime / 60);
            const seconds = gameTime % 60;
            timerDisplay.innerText = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;

            if (gameTime >= GAME_DURATION) {
                endGame(true); // Game Win
            }
        }

        function enableButtons() {
            actionButtons.forEach(button => button.classList.remove('disabled'));
        }

        function disableButtonsForCooldown() {
            actionButtons.forEach(button => button.classList.add('disabled'));
            setTimeout(enableButtons, ACTION_COOLDOWN);
        }

        function performAction(need, effect) {
            if (isGameOver) return;
            disableButtonsForCooldown();

            switch (need) {
                case 'hunger':
                    hunger = Math.min(100, hunger + effect);
                    break;
                case 'diaper':
                    diaper = Math.min(100, diaper + effect);
                    break;
                case 'sleep':
                    sleep = Math.min(100, sleep + effect);
                    break;
                case 'walk': // Passear afeta v√°rias coisas positivamente
                    hunger = Math.min(100, hunger + effect/2);
                    diaper = Math.min(100, diaper + effect/2);
                    sleep = Math.min(100, sleep + effect/2);
                    score += 10; // Extra score for walking
                    break;
            }
            score += 5; // Score base por qualquer a√ß√£o
            updateUI();
        }

        function feedBaby() { performAction('hunger', ACTION_EFFECT.feed); }
        function changeDiaper() { performAction('diaper', ACTION_EFFECT.diaper); }
        function putToSleep() { performAction('sleep', ACTION_EFFECT.sleep); }
        function takeForWalk() { performAction('walk', ACTION_EFFECT.walk); }

        function startGame() {
            hunger = 100;
            diaper = 100;
            sleep = 100;
            score = 0;
            gameTime = 0;
            isGameOver = false;

            gameOverPopup.classList.remove('active');
            gameWinPopup.classList.remove('active');
            enableButtons();

            updateUI();
            clearInterval(gameInterval);
            clearInterval(needsInterval);
            gameInterval = setInterval(updateTimer, 1000); // Atualiza a cada segundo
            needsInterval = setInterval(decreaseNeeds, 1000); // Necessidades diminuem a cada segundo
        }

        function endGame(won) {
            isGameOver = true;
            clearInterval(gameInterval);
            clearInterval(needsInterval);
            actionButtons.forEach(button => button.classList.add('disabled')); // Desabilita bot√µes

            if (won) {
                finalTimeWin.innerText = timerDisplay.innerText;
                finalScoreWin.innerText = score;
                gameWinPopup.classList.add('active');
            } else {
                finalScoreGameOver.innerText = score;
                gameOverPopup.classList.add('active');
            }
        }

        function restartGame() {
            startGame();
        }

        // Inicia o jogo quando a p√°gina carrega
        window.onload = startGame;
    </script>
</body>
</html>
